<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>SQL 문제은행</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>문제 {{ q }}: {{ problem.title }}</h1>

    <h2>상황</h2>
    <p>{{ problem.situation }}</p>

    <h2>테이블 설명</h2>
    <p>{{ problem.schema }}</p>

    <form action="/submit" method="post">
        <textarea name="sql" placeholder="여기에 SQL 쿼리를 입력하세요">{{ submitted_sql if submitted_sql else '' }}</textarea><br>
        <input type="hidden" name="q" value="{{ q }}">
        <input type="hidden" name="trial" value="{{ trial }}">
        <button type="submit">실행하기</button>
        <a href="/pass?q={{ q }}&trial={{ trial }}" style="text-decoration:none;">
            <button type="button">PASS (정답 복사)</button>
        </a>
    </form>

    {% if message %}
        <p class="message"><strong>{{ message }}</strong></p>
    {% endif %}

    {% if result %}
        <h2>결과</h2>
        <table>
            <tr>
                {% for col in problem.columns %}
                    <th>{{ col }}</th>
                {% endfor %}
            </tr>
            {% for row in result %}
                <tr>
                    {% for item in row %}
                        <td>{{ item }}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    {% endif %}

    <hr>

    <h3>힌트</h3>
    <ul>
        {% for hint in problem.hints[:trial] %}
            <li>{{ hint }}</li>
        {% endfor %}
    </ul>

</body>
</html>

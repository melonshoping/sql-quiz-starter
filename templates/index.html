<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>SQL 문제은행</title>
</head>
<body>
    <h1>문제 {{ q }}: {{ problem.title }}</h1>
    <p><strong>테이블 설명:</strong> {{ problem.schema }}</p>

    <form action="/submit" method="post">
        <textarea name="sql" rows="10" cols="80" placeholder="여기에 SQL 쿼리를 입력하세요">{{ submitted_sql if submitted_sql else '' }}</textarea><br>
        <input type="hidden" name="q" value="{{ q }}">
        <button type="submit">실행하기</button>
    </form>

    {% if result %}
        <h2>결과</h2>
        <table border="1" cellspacing="0" cellpadding="5">
            <tr>
                {% for col in problem.columns %}
                    <th>{{ col }}</th>
                {% endfor %}
            </tr>
            {% for row in result %}
                <tr>
                    {% for item in row %}
                        <td>{{ item }}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    {% endif %}

    <hr>

    <h3>힌트</h3>
    <ul>
        {% for hint in problem.hints %}
            <li>{{ hint }}</li>
        {% endfor %}
    </ul>

    <a href="/pass?q={{ q }}">PASS (정답 복사)</a>
</body>
</html>
